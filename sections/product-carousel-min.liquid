<section class="product-carousel-min">
  <div class="carousel-container">
    {% if section.settings.heading != blank %}
      <h2 class="carousel-heading">{{ section.settings.heading }}</h2>
    {% endif %}

    {% assign collection = collections[section.settings.collection] %}
    {% if collection == blank %}
      {% assign collection = collections.all %}
    {% endif %}

    <div class="product-carousel">
      <div class="carousel-track">
        {% for product in collection.products limit: 12 %}
          <div class="carousel-item">
            {% render 'card-product-min', product: product %}
          </div>
        {% endfor %}
      </div>
    </div>

    {% if section.settings.view_all_text != blank and section.settings.view_all_link != blank %}
      <div class="carousel-actions">
        <a href="{{ section.settings.view_all_link }}" class="btn btn-outline">
          {{ section.settings.view_all_text }}
        </a>
      </div>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Product Carousel Minimal",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Featured Products"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "text",
      "id": "view_all_text",
      "label": "View All Button Text",
      "default": "View All"
    },
    {
      "type": "url",
      "id": "view_all_link",
      "label": "View All Button Link",
      "default": "/collections/all"
    }
  ],
  "presets": [
    {
      "name": "Product Carousel Minimal"
    }
  ]
}
{% endschema %}